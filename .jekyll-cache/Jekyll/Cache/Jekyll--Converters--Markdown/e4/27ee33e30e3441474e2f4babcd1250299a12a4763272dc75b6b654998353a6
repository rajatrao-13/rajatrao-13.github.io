I"j<h2 id="brief">Brief</h2>
<p>    On enumerating different services of <code class="highlighter-rouge">Monteverde</code> machine, we were able extract list of users available in the target machine. Due to security misconfiguration, one of the users has set the password same as the username and this was identified by brute forcing the same using <code class="highlighter-rouge">smb_login</code> module from <code class="highlighter-rouge">metasploit</code>. Levering the misconfiguration, we were able to login to <code class="highlighter-rouge">SMB</code> with the help of <code class="highlighter-rouge">smbclient</code> and on further enumeration, we were able to extract a file named <code class="highlighter-rouge">azure.xml</code> under <code class="highlighter-rouge">mhope</code> user folder consisting of credentails of the same user. Making the use of credential found, we were able to get <code class="highlighter-rouge">Windows Remote Management</code> shell with the help of tool named <code class="highlighter-rouge">evil-winrm</code> which targets on port <code class="highlighter-rouge">5985</code> port. Here, we were able to get basic shell and were able pwn the <code class="highlighter-rouge">user.txt</code> part of the challenge. Moving to privilege escalation part, enumemrating local system, we were able to understand the target machine has <code class="highlighter-rouge">Azure Active Directory Connect</code>. On searching for exploits on google, we were able to find a script and privilege to highest level of authorization and complete the final challenge of getting <code class="highlighter-rouge">root.txt</code></p>

<h2 id="flow">Flow</h2>
<ul>
  <li>
    <p><code class="highlighter-rouge">enum4linux</code> reveals list of users name</p>
  </li>
  <li>
    <p>Brute Forcing <code class="highlighter-rouge">SMb</code> via <code class="highlighter-rouge">metasploit</code> using the usernames as password identifies a legit credential (<code class="highlighter-rouge">SABatchJobs:SABatchJobs</code>)</p>
  </li>
  <li>
    <p>Login as <code class="highlighter-rouge">SABatchJobs</code> in <code class="highlighter-rouge">SMB</code> via <code class="highlighter-rouge">smbcleint</code></p>
  </li>
  <li>
    <p>Enumerate <code class="highlighter-rouge">mhope</code> folder and download <code class="highlighter-rouge">azure.xml</code> which consists of mhope credentials (<code class="highlighter-rouge">mhope:4n0therD4y@n0th3r$</code>)</p>
  </li>
  <li>
    <p>Login as <code class="highlighter-rouge">mhope</code> in Win-RM Service (5985) using <code class="highlighter-rouge">evil-winrm</code></p>
  </li>
  <li>
    <p>Get <code class="highlighter-rouge">user.txt</code></p>
  </li>
  <li>
    <p>Local enumeramation discloses usage of <code class="highlighter-rouge">Azure AD Connect</code> in target machine</p>
  </li>
  <li>
    <p>Search for Azure AD exploit leads to powershell script (module) to generate new <code class="highlighter-rouge">administrator</code> password in the target machine</p>
  </li>
  <li>
    <p>Use newly generated <code class="highlighter-rouge">administrator</code> credentials and login as <code class="highlighter-rouge">administrator</code> in <code class="highlighter-rouge">Win-RM service</code> (5985) using <code class="highlighter-rouge">evil-winrm</code></p>
  </li>
  <li>
    <p>Get <code class="highlighter-rouge">root.txt</code></p>
  </li>
</ul>

:ET